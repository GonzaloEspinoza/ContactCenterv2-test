@using Logica;
@using Entidad;
@using Entidad.Enums;
@using DataP;
@using Backend.Models;
@model List<ECategoriaPreguntaFrecuente>
@{
    LPermiso LPermiso = LPermiso.Instancia.LPermiso;
    List<Permiso> HijosMenu = ViewBag.PermisosH;
    bool PermisoModificar = LPermiso.TienePermisoEspecifico(HijosMenu, AccionPermiso.Modificar);
    bool PermisoEliminar = LPermiso.TienePermisoEspecifico(HijosMenu, AccionPermiso.Eliminar);
    bool PermisoListar = LPermiso.TienePermisoEspecifico(HijosMenu, AccionPermiso.Listar);
    bool PermisoVer = LPermiso.TienePermisoEspecifico(HijosMenu, AccionPermiso.Ver);

    
}
<table class="table table-striped table-bordered table-hover" id="sample_2">
    <thead>
        <tr>
            <th>ID</th>
            <th>NOMBRE</th>
            <th>EMPRESA</th>
            <th>ESTADO</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{

            foreach (var p in Model)
            {
                <tr>
                    <td>@p.CategoriaPreguntaFrecuenteId</td>
                    <td>@p.Nombre</td>
                    <td>@p.Empresa.sNombre</td>
                    <td>
                        @{
                            if (p.Estado == (int)Estado.Habilitado)
                            {
                                <span class="label label-sm label-success"> Habilitado </span>
                            }
                            else if (p.Estado == (int)Estado.Desabilitado)
                            {
                                <span class="label label-sm label-danger"> Deshabilitado </span>
                            }
                        }
                    </td>
                    <td>
                        @{

                            if (PermisoVer)
                            {
                                <a href="@Url.Action("detallecategoria", "PreguntaFrecuente", new { id = p.CategoriaPreguntaFrecuenteId })" onclick="BloquearPantalla();" class="btn btn-outline btn-circle  btn-sm">
                                    <i class="fa fa-eye"></i> Ver
                                </a>
                            }
                        }
                    </td>
                    <td>
                        @{
                            if (PermisoModificar)
                            {
                                <a href="@Url.Action("categoria", "PreguntaFrecuente", new { id = p.CategoriaPreguntaFrecuenteId })" onclick="BloquearPantalla();" class="btn btn-outline btn-circle btn-sm">
                                    <i class="fa fa-edit"></i> Editar
                                </a>
                            }
                        }
                    </td>
                    <td>
                        @{
                            if (PermisoEliminar)
                            {
                                <a onclick="changeestate('@p.Nombre','eliminar','eliminado','2','@p.CategoriaPreguntaFrecuenteId' ,'@Url.Action("CambiarEstadoCategoria", "PreguntaFrecuente")')" class="btn btn-outline btn-circle red btn-sm range">
                                    <i class="fa fa-trash-o"></i> Eliminar
                                </a>
                            }
                        }
                    </td>
                    <td>
                        @{
                            if (PermisoListar)
                            {
                                <a href="@Url.Action("preguntas", "PreguntaFrecuente", new { categoriaId = p.CategoriaPreguntaFrecuenteId})" onclick="BloquearPantalla();" class="btn btn-outline btn-circle btn-sm purple">
                                    <i class="icon-bubbles"></i> Preguntas
                                </a>
                            }
                        }
                    </td>

                </tr>
             }
        }
    </tbody>
</table>
